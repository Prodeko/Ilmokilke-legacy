{% extends 'ProdekoIlmoBundle:Ilmo:base.html.twig' %}

{% block title %}
	{{ parent() }} - {{ event.name }} - Ilmoittautuneet
{% endblock %}

{% block body %}
	<div class="container">
		<div id="content">
			<div class="row" id="title">
				<div class="span9">
	    			<h2>{{ event.name }}</h2>
	    			<p>
	    				{% if isOpen %}
	    					Ilmoittautuminen t채h채n tapahtumaan on auki! Ilmoittautuminen sulkeutuu {{ event.registrationEnds | date("G:i j.n.y") }}.
	    				{% else %}
	    					Ilmoittautuminen t채h채n tapahtumaan on kiinni. Ilmoittautumisaika: {{ event.registrationStarts | date("j.n.y G:i") }} - {{ event.registrationEnds | date("j.n.y G:i") }}
	    				{% endif %}
    				</p>
	    			<p>
	    			<a href="{{ path('edit', {'id': event.id}) }}">Muokkaa tapahtumaa</a>
	    			</p>
    			</div>
    		</div>
    		<div class="row">
    			<div class="span10" id="registered">
    				<h3>{% trans %}header.registrant.list{% endtrans %}</h3>
    				<table class="table table-striped table-bordered table-condensed">
    					<thead>
    						<tr>
    							<th>{% trans %}name.first{% endtrans %}</th>
    							<th>{% trans %}name.last{% endtrans %}</th>
    							<th>email</th>
    							{% for field in event.freeTextFields %}
    								<th>{{ field.name }}</th>
    							{% endfor %}
    							{% for field in event.multipleChoiceFields %}
    								<th>{{ field.name }}</th>
    							{% endfor %}
    							<th>Poista</th>
    						</tr>
    					</thead>
    					<tbody>
			    			{% for registration in registrations %}
			    				<tr>
									<td>{{ registration.firstName }}</td>
									<td>{{ registration.lastName }}</td>
									<td>{{ registration.email }}</td>
									{% for entry in registration.freeTextEntries %}
    									<td>{{ entry.content }}</td>
    								{% endfor %}
    								{% for entry in registration.multipleChoiceEntries %}
    									<td>{{ entry.selection }}</td>
    								{% endfor %}
    								{# TODO: Token-systeemi poistamiseen ja joku alertti (Haluatko varmasti poistaa ilmoittautumisen? etc.) #}
    								<td class="removeReg"><a class="close" href="{{ path('removeRegistration', {'token': registration.token}) }}">&times;</a></td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
    		</div>
    	</div>
    	{% include 'ProdekoIlmoBundle:Ilmo:footer.html.twig' %}
    </div>
	
{% endblock %}